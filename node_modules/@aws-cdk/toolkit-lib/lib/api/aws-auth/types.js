"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BaseCredentials = void 0;
const shared_private_1 = require("../shared-private");
class BaseCredentials {
    /**
     * Use no base credentials
     *
     * There will be no current account and no current region during synthesis. To
     * successfully deploy with this set of base credentials:
     *
     * - The CDK app must provide concrete accounts and regions during synthesis
     * - Credential plugins must be installed to provide credentials for those
     *   accounts.
     */
    static none() {
        return new class extends BaseCredentials {
            async makeSdkConfig() {
                return {
                    credentialProvider: () => {
                        // eslint-disable-next-line @cdklabs/no-throw-default-error
                        throw new Error('No credentials available due to BaseCredentials.none()');
                    },
                };
            }
            toString() {
                return 'BaseCredentials.none()';
            }
        };
    }
    /**
     * Obtain base credentials and base region the same way the AWS CLI would
     *
     * Credentials and region will be read from the environment first, falling back
     * to INI files or other sources if available.
     *
     * The profile name is configurable.
     */
    static awsCliCompatible(options = {}) {
        return new class extends BaseCredentials {
            makeSdkConfig(services) {
                const awsCli = new shared_private_1.AwsCliCompatible(services.ioHelper, services.requestHandler ?? {}, services.logger);
                return awsCli.baseConfig(options.profile);
            }
            toString() {
                return `BaseCredentials.awsCliCompatible(${JSON.stringify(options)})`;
            }
        };
    }
    /**
     * Use a custom SDK identity provider for the base credentials
     *
     * If your provider uses STS calls to obtain base credentials, you must make
     * sure to also configure the necessary HTTP options (like proxy and user
     * agent) and the region on the STS client directly; the toolkit code cannot
     * do this for you.
     */
    static custom(options) {
        return new class extends BaseCredentials {
            makeSdkConfig() {
                return Promise.resolve({
                    credentialProvider: options.provider,
                    defaultRegion: options.region,
                });
            }
            toString() {
                return `BaseCredentials.custom(${JSON.stringify({
                    ...options,
                    provider: '...',
                })})`;
            }
        };
    }
}
exports.BaseCredentials = BaseCredentials;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0eXBlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSxzREFBcUQ7QUE4Q3JELE1BQXNCLGVBQWU7SUFDbkM7Ozs7Ozs7OztPQVNHO0lBQ0ksTUFBTSxDQUFDLElBQUk7UUFDaEIsT0FBTyxJQUFJLEtBQU0sU0FBUSxlQUFlO1lBQy9CLEtBQUssQ0FBQyxhQUFhO2dCQUN4QixPQUFPO29CQUNMLGtCQUFrQixFQUFFLEdBQUcsRUFBRTt3QkFDdkIsMkRBQTJEO3dCQUMzRCxNQUFNLElBQUksS0FBSyxDQUFDLHdEQUF3RCxDQUFDLENBQUM7b0JBQzVFLENBQUM7aUJBQ0YsQ0FBQztZQUNKLENBQUM7WUFFTSxRQUFRO2dCQUNiLE9BQU8sd0JBQXdCLENBQUM7WUFDbEMsQ0FBQztTQUNGLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFtQyxFQUFFO1FBQ2xFLE9BQU8sSUFBSSxLQUFNLFNBQVEsZUFBZTtZQUMvQixhQUFhLENBQUMsUUFBNkI7Z0JBQ2hELE1BQU0sTUFBTSxHQUFHLElBQUksaUNBQWdCLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsY0FBYyxJQUFJLEVBQUUsRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ3ZHLE9BQU8sTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDNUMsQ0FBQztZQUVNLFFBQVE7Z0JBQ2IsT0FBTyxvQ0FBb0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO1lBQ3hFLENBQUM7U0FDRixDQUFDO0lBQ0osQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSSxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQW9DO1FBQ3ZELE9BQU8sSUFBSSxLQUFNLFNBQVEsZUFBZTtZQUMvQixhQUFhO2dCQUNsQixPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUM7b0JBQ3JCLGtCQUFrQixFQUFFLE9BQU8sQ0FBQyxRQUFRO29CQUNwQyxhQUFhLEVBQUUsT0FBTyxDQUFDLE1BQU07aUJBQzlCLENBQUMsQ0FBQztZQUNMLENBQUM7WUFFTSxRQUFRO2dCQUNiLE9BQU8sMEJBQTBCLElBQUksQ0FBQyxTQUFTLENBQUM7b0JBQzlDLEdBQUcsT0FBTztvQkFDVixRQUFRLEVBQUUsS0FBSztpQkFDaEIsQ0FBQyxHQUFHLENBQUM7WUFDUixDQUFDO1NBQ0YsQ0FBQztJQUNKLENBQUM7Q0FNRjtBQS9FRCwwQ0ErRUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEF3c0NyZWRlbnRpYWxJZGVudGl0eVByb3ZpZGVyIH0gZnJvbSAnQHNtaXRoeS90eXBlcyc7XG5pbXBvcnQgdHlwZSB7IFNka1Byb3ZpZGVyU2VydmljZXMgfSBmcm9tICcuLi9zaGFyZWQtcHJpdmF0ZSc7XG5pbXBvcnQgeyBBd3NDbGlDb21wYXRpYmxlIH0gZnJvbSAnLi4vc2hhcmVkLXByaXZhdGUnO1xuXG4vKipcbiAqIE9wdGlvbnMgZm9yIHRoZSBkZWZhdWx0IFNESyBwcm92aWRlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNka0NvbmZpZyB7XG4gIC8qKlxuICAgKiBUaGUgYmFzZSBjcmVkZW50aWFscyBhbmQgcmVnaW9uIHVzZWQgdG8gc2VlZCB0aGUgVG9vbGtpdCB3aXRoXG4gICAqXG4gICAqIEBkZWZhdWx0IEJhc2VDcmVkZW50aWFscy5hd3NDbGlDb21wYXRpYmxlKClcbiAgICovXG4gIHJlYWRvbmx5IGJhc2VDcmVkZW50aWFscz86IEJhc2VDcmVkZW50aWFscztcblxuICAvKipcbiAgICogUHJvZmlsZSB0byByZWFkIGZyb20gfi8uYXdzIGZvciBiYXNlIGNyZWRlbnRpYWxzXG4gICAqXG4gICAqIEBkZWZhdWx0IC0gTm8gcHJvZmlsZVxuICAgKiBAZGVwcmVjYXRlZCBVc2UgYGJhc2VDcmVkZW50aWFsc2AgaW5zdGVhZFxuICAgKi9cbiAgcmVhZG9ubHkgcHJvZmlsZT86IHN0cmluZztcblxuICAvKipcbiAgICogSFRUUCBvcHRpb25zIGZvciBTREtcbiAgICovXG4gIHJlYWRvbmx5IGh0dHBPcHRpb25zPzogU2RrSHR0cE9wdGlvbnM7XG59XG5cbi8qKlxuICogT3B0aW9ucyBmb3IgaW5kaXZpZHVhbCBTREtzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2RrSHR0cE9wdGlvbnMge1xuICAvKipcbiAgICogUHJveHkgYWRkcmVzcyB0byB1c2VcbiAgICpcbiAgICogQGRlZmF1bHQgTm8gcHJveHlcbiAgICovXG4gIHJlYWRvbmx5IHByb3h5QWRkcmVzcz86IHN0cmluZztcblxuICAvKipcbiAgICogQSBwYXRoIHRvIGEgY2VydGlmaWNhdGUgYnVuZGxlIHRoYXQgY29udGFpbnMgYSBjZXJ0IHRvIGJlIHRydXN0ZWQuXG4gICAqXG4gICAqIEBkZWZhdWx0IE5vIGNlcnRpZmljYXRlIGJ1bmRsZVxuICAgKi9cbiAgcmVhZG9ubHkgY2FCdW5kbGVQYXRoPzogc3RyaW5nO1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUNyZWRlbnRpYWxzIHtcbiAgLyoqXG4gICAqIFVzZSBubyBiYXNlIGNyZWRlbnRpYWxzXG4gICAqXG4gICAqIFRoZXJlIHdpbGwgYmUgbm8gY3VycmVudCBhY2NvdW50IGFuZCBubyBjdXJyZW50IHJlZ2lvbiBkdXJpbmcgc3ludGhlc2lzLiBUb1xuICAgKiBzdWNjZXNzZnVsbHkgZGVwbG95IHdpdGggdGhpcyBzZXQgb2YgYmFzZSBjcmVkZW50aWFsczpcbiAgICpcbiAgICogLSBUaGUgQ0RLIGFwcCBtdXN0IHByb3ZpZGUgY29uY3JldGUgYWNjb3VudHMgYW5kIHJlZ2lvbnMgZHVyaW5nIHN5bnRoZXNpc1xuICAgKiAtIENyZWRlbnRpYWwgcGx1Z2lucyBtdXN0IGJlIGluc3RhbGxlZCB0byBwcm92aWRlIGNyZWRlbnRpYWxzIGZvciB0aG9zZVxuICAgKiAgIGFjY291bnRzLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBub25lKCk6IEJhc2VDcmVkZW50aWFscyB7XG4gICAgcmV0dXJuIG5ldyBjbGFzcyBleHRlbmRzIEJhc2VDcmVkZW50aWFscyB7XG4gICAgICBwdWJsaWMgYXN5bmMgbWFrZVNka0NvbmZpZygpOiBQcm9taXNlPFNka0Jhc2VDb25maWc+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjcmVkZW50aWFsUHJvdmlkZXI6ICgpID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAY2RrbGFicy9uby10aHJvdy1kZWZhdWx0LWVycm9yXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNyZWRlbnRpYWxzIGF2YWlsYWJsZSBkdWUgdG8gQmFzZUNyZWRlbnRpYWxzLm5vbmUoKScpO1xuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuICdCYXNlQ3JlZGVudGlhbHMubm9uZSgpJztcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIE9idGFpbiBiYXNlIGNyZWRlbnRpYWxzIGFuZCBiYXNlIHJlZ2lvbiB0aGUgc2FtZSB3YXkgdGhlIEFXUyBDTEkgd291bGRcbiAgICpcbiAgICogQ3JlZGVudGlhbHMgYW5kIHJlZ2lvbiB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZW52aXJvbm1lbnQgZmlyc3QsIGZhbGxpbmcgYmFja1xuICAgKiB0byBJTkkgZmlsZXMgb3Igb3RoZXIgc291cmNlcyBpZiBhdmFpbGFibGUuXG4gICAqXG4gICAqIFRoZSBwcm9maWxlIG5hbWUgaXMgY29uZmlndXJhYmxlLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBhd3NDbGlDb21wYXRpYmxlKG9wdGlvbnM6IEF3c0NsaUNvbXBhdGlibGVPcHRpb25zID0ge30pOiBCYXNlQ3JlZGVudGlhbHMge1xuICAgIHJldHVybiBuZXcgY2xhc3MgZXh0ZW5kcyBCYXNlQ3JlZGVudGlhbHMge1xuICAgICAgcHVibGljIG1ha2VTZGtDb25maWcoc2VydmljZXM6IFNka1Byb3ZpZGVyU2VydmljZXMpOiBQcm9taXNlPFNka0Jhc2VDb25maWc+IHtcbiAgICAgICAgY29uc3QgYXdzQ2xpID0gbmV3IEF3c0NsaUNvbXBhdGlibGUoc2VydmljZXMuaW9IZWxwZXIsIHNlcnZpY2VzLnJlcXVlc3RIYW5kbGVyID8/IHt9LCBzZXJ2aWNlcy5sb2dnZXIpO1xuICAgICAgICByZXR1cm4gYXdzQ2xpLmJhc2VDb25maWcob3B0aW9ucy5wcm9maWxlKTtcbiAgICAgIH1cblxuICAgICAgcHVibGljIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYEJhc2VDcmVkZW50aWFscy5hd3NDbGlDb21wYXRpYmxlKCR7SlNPTi5zdHJpbmdpZnkob3B0aW9ucyl9KWA7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2UgYSBjdXN0b20gU0RLIGlkZW50aXR5IHByb3ZpZGVyIGZvciB0aGUgYmFzZSBjcmVkZW50aWFsc1xuICAgKlxuICAgKiBJZiB5b3VyIHByb3ZpZGVyIHVzZXMgU1RTIGNhbGxzIHRvIG9idGFpbiBiYXNlIGNyZWRlbnRpYWxzLCB5b3UgbXVzdCBtYWtlXG4gICAqIHN1cmUgdG8gYWxzbyBjb25maWd1cmUgdGhlIG5lY2Vzc2FyeSBIVFRQIG9wdGlvbnMgKGxpa2UgcHJveHkgYW5kIHVzZXJcbiAgICogYWdlbnQpIGFuZCB0aGUgcmVnaW9uIG9uIHRoZSBTVFMgY2xpZW50IGRpcmVjdGx5OyB0aGUgdG9vbGtpdCBjb2RlIGNhbm5vdFxuICAgKiBkbyB0aGlzIGZvciB5b3UuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGN1c3RvbShvcHRpb25zOiBDdXN0b21CYXNlQ3JlZGVudGlhbHNPcHRpb24pOiBCYXNlQ3JlZGVudGlhbHMge1xuICAgIHJldHVybiBuZXcgY2xhc3MgZXh0ZW5kcyBCYXNlQ3JlZGVudGlhbHMge1xuICAgICAgcHVibGljIG1ha2VTZGtDb25maWcoKTogUHJvbWlzZTxTZGtCYXNlQ29uZmlnPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIGNyZWRlbnRpYWxQcm92aWRlcjogb3B0aW9ucy5wcm92aWRlcixcbiAgICAgICAgICBkZWZhdWx0UmVnaW9uOiBvcHRpb25zLnJlZ2lvbixcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBCYXNlQ3JlZGVudGlhbHMuY3VzdG9tKCR7SlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgcHJvdmlkZXI6ICcuLi4nLFxuICAgICAgICB9KX0pYDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgU0RLIGNvbmZpZyBmcm9tIHRoZSBCYXNlQ3JlZGVudGlhbHMgc2V0dGluZ3NcbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBtYWtlU2RrQ29uZmlnKHNlcnZpY2VzOiBTZGtQcm92aWRlclNlcnZpY2VzKTogUHJvbWlzZTxTZGtCYXNlQ29uZmlnPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBd3NDbGlDb21wYXRpYmxlT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBUaGUgcHJvZmlsZSB0byByZWFkIGZyb20gYH4vLmF3cy9jcmVkZW50aWFsc2AuXG4gICAqXG4gICAqIElmIG5vdCBzdXBwbGllZCB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgQVdTX1BST0ZJTEUgd2lsbCBiZSB1c2VkLlxuICAgKlxuICAgKiBAZGVmYXVsdCAtIFVzZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpZiBzZXQuXG4gICAqL1xuICByZWFkb25seSBwcm9maWxlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1c3RvbUJhc2VDcmVkZW50aWFsc09wdGlvbiB7XG4gIC8qKlxuICAgKiBUaGUgY3JlZGVudGlhbHMgcHJvdmlkZXIgdG8gdXNlIHRvIG9idGFpbiBiYXNlIGNyZWRlbnRpYWxzXG4gICAqXG4gICAqIElmIHlvdXIgcHJvdmlkZXIgdXNlcyBTVFMgY2FsbHMgdG8gb2J0YWluIGJhc2UgY3JlZGVudGlhbHMsIHlvdSBtdXN0IG1ha2VcbiAgICogc3VyZSB0byBhbHNvIGNvbmZpZ3VyZSB0aGUgbmVjZXNzYXJ5IEhUVFAgb3B0aW9ucyAobGlrZSBwcm94eSBhbmQgdXNlclxuICAgKiBhZ2VudCkgb24gdGhlIFNUUyBjbGllbnQgZGlyZWN0bHk7IHRoZSB0b29sa2l0IGNvZGUgY2Fubm90IGRvIHRoaXMgZm9yIHlvdS5cbiAgICovXG4gIHJlYWRvbmx5IHByb3ZpZGVyOiBBd3NDcmVkZW50aWFsSWRlbnRpdHlQcm92aWRlcjtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgcmVnaW9uIHRvIHN5bnRoZXNpemUgZm9yXG4gICAqXG4gICAqIENESyBhcHBsaWNhdGlvbnMgY2FuIG92ZXJyaWRlIHRoaXMgcmVnaW9uLiBOT1RFOiB0aGlzIHJlZ2lvbiB3aWxsICpub3QqXG4gICAqIGFmZmVjdCBhbnkgU1RTIGNhbGxzIG1hZGUgYnkgdGhlIGdpdmVuIHByb3ZpZGVyLCBpZiBhbnkuIFlvdSBuZWVkIHRvIGNvbmZpZ3VyZVxuICAgKiB5b3VyIGNyZWRlbnRpYWwgcHJvdmlkZXIgc2VwYXJhdGVseS5cbiAgICpcbiAgICogQGRlZmF1bHQgJ3VzLWVhc3QtMSdcbiAgICovXG4gIHJlYWRvbmx5IHJlZ2lvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZGtCYXNlQ29uZmlnIHtcbiAgcmVhZG9ubHkgY3JlZGVudGlhbFByb3ZpZGVyOiBBd3NDcmVkZW50aWFsSWRlbnRpdHlQcm92aWRlcjtcblxuICByZWFkb25seSBkZWZhdWx0UmVnaW9uPzogc3RyaW5nO1xufVxuIl19